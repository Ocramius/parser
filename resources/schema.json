{
    "$id": "type.schema.json",
    "$schema": "https://json-schema.org/draft-07/schema#",
    "title": "TypeLang",
    "type": "object",
    "required": ["kind"],
    "properties": {
        "kind": {
            "type": "integer"
        }
    },
    "$ref": "#/definitions/type",
    "definitions": {
        "type": {
            "type": "object",
            "required": ["kind"],
            "properties": {
                "kind": {
                    "type": "integer"
                }
            },
            "oneOf": [
                {"$ref": "#/definitions/statements"},
                {"$ref": "#/definitions/literals"}
            ]
        },
        "statements": {
            "type": "object",
            "required": ["kind"],
            "properties": {
                "kind": {
                    "type": "integer"
                }
            },
            "oneOf": [
                {"$ref": "#/definitions/statement/class-const-mask"},
                {"$ref": "#/definitions/statement/class-const"},
                {"$ref": "#/definitions/statement/const-mask"},
                {"$ref": "#/definitions/statement/and"},
                {"$ref": "#/definitions/statement/or"},
                {"$ref": "#/definitions/statement/list"},
                {"$ref": "#/definitions/statement/optional"},
                {"$ref": "#/definitions/statement/condition"},
                {"$ref": "#/definitions/statement/fn"},
                {"$ref": "#/definitions/statement/ref"}
            ]
        },
        "statement": {
            "class-const-mask": {
                "description": "Class Const Mask Type",
                "type": "object",
                "additionalProperties": false,
                "required": ["kind", "class"],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 259,
                        "maximum": 259
                    },
                    "class": {
                        "type": "string",
                        "minLength": 1
                    },
                    "constant": {
                        "type": "string",
                        "minLength": 1
                    }
                }
            },
            "class-const": {
                "description": "Class Const Type",
                "type": "object",
                "additionalProperties": false,
                "required": ["kind", "class", "constant"],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 260,
                        "maximum": 260
                    },
                    "class": {
                        "type": "string",
                        "minLength": 1
                    },
                    "constant": {
                        "type": "string",
                        "minLength": 1
                    }
                }
            },
            "const-mask": {
                "description": "Const Mask Type",
                "type": "object",
                "additionalProperties": false,
                "required": ["kind", "name"],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 261,
                        "maximum": 261
                    },
                    "name": {
                        "type": "string",
                        "minLength": 1
                    }
                }
            },
            "and": {
                "description": "Intersection Type",
                "type": "object",
                "additionalProperties": false,
                "required": ["kind", "items"],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 262,
                        "maximum": 262
                    },
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/definitions/type"
                        }
                    }
                }
            },
            "or": {
                "description": "Union Type",
                "type": "object",
                "additionalProperties": false,
                "required": ["kind", "items"],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 263,
                        "maximum": 263
                    },
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/definitions/type"
                        }
                    }
                }
            },
            "list": {
                "description": "List Type",
                "type": "object",
                "additionalProperties": false,
                "required": ["kind", "type"],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 266,
                        "maximum": 266
                    },
                    "type": {
                        "$ref": "#/definitions/type"
                    }
                }
            },
            "optional": {
                "description": "Nullable Type",
                "type": "object",
                "additionalProperties": false,
                "required": ["kind", "type"],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 264,
                        "maximum": 264
                    },
                    "type": {
                        "$ref": "#/definitions/type"
                    }
                }
            },
            "condition": {
                "description": "Ternary Condition Type",
                "type": "object",
                "additionalProperties": false,
                "required": ["kind", "condition", "then", "else"],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 265,
                        "maximum": 265
                    },
                    "condition": {
                        "type": "object",
                        "$schema": "#TODO Condition"
                    },
                    "then": {
                        "$ref": "#/definitions/type"
                    },
                    "else": {
                        "$ref": "#/definitions/type"
                    }
                }
            },
            "fn": {
                "description": "Callable Type",
                "type": "object",
                "additionalProperties": false,
                "required": ["kind", "name", "parameters"],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 258,
                        "maximum": 258
                    },
                    "name": {
                        "type": "string",
                        "minLength": 1
                    },
                    "type": {
                        "$ref": "#/definitions/type"
                    },
                    "parameters": {
                        "type": "object",
                        "additionalProperties": false,
                        "required": ["items"],
                        "properties": {
                            "items": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "$schema": "#TODO Parameter"
                                }
                            }
                        }
                    }
                }
            },
            "ref": {
                "description": "Type Reference",
                "type": "object",
                "additionalProperties": false,
                "required": ["kind", "name"],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 257,
                        "maximum": 257
                    },
                    "name": {
                        "type": "string",
                        "minLength": 1
                    },
                    "arguments": {
                        "type": "object",
                        "required": ["items"],
                        "additionalProperties": false,
                        "properties": {
                            "items": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "additionalProperties": false,
                                    "required": ["value"],
                                    "properties": {
                                        "hint": {
                                            "type": "string",
                                            "minLength": 1
                                        },
                                        "value": {
                                            "$ref": "#/definitions/type"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "fields": {
                        "type": "object",
                        "required": ["items", "sealed"],
                        "additionalProperties": false,
                        "properties": {
                            "items": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "$schema": "#TODO Field"
                                }
                            },
                            "sealed": {
                                "type": "boolean"
                            }
                        }
                    }
                }
            }
        },
        "literals": {
            "type": "object",
            "required": ["kind"],
            "properties": {
                "kind": {
                    "type": "integer"
                }
            },
            "oneOf": [
                {"$ref": "#/definitions/literal/bool"},
                {"$ref": "#/definitions/literal/float"},
                {"$ref": "#/definitions/literal/int"},
                {"$ref": "#/definitions/literal/null"},
                {"$ref": "#/definitions/literal/string"},
                {"$ref": "#/definitions/literal/var"}
            ]
        },
        "literal": {
            "bool": {
                "description": "Bool Literal Type",
                "type": "object",
                "additionalProperties": false,
                "required": [
                    "kind",
                    "value"
                ],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 1025,
                        "maximum": 1025
                    },
                    "value": {
                        "type": "boolean"
                    }
                }
            },
            "float": {
                "description": "Float Literal Type",
                "type": "object",
                "additionalProperties": false,
                "required": [
                    "kind",
                    "value"
                ],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 1026,
                        "maximum": 1026
                    },
                    "value": {
                        "type": "number",
                        "multipleOf": 0.00000001
                    }
                }
            },
            "int": {
                "description": "Int Literal Type",
                "type": "object",
                "additionalProperties": false,
                "required": [
                    "kind",
                    "value"
                ],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 1027,
                        "maximum": 1027
                    },
                    "value": {
                        "type": "integer"
                    }
                }
            },
            "null": {
                "description": "Null Literal Type",
                "type": "object",
                "additionalProperties": false,
                "required": [
                    "kind",
                    "value"
                ],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 1028,
                        "maximum": 1028
                    },
                    "value": {
                        "type": "null"
                    }
                }
            },
            "string": {
                "description": "String Literal Type",
                "type": "object",
                "additionalProperties": false,
                "required": [
                    "kind",
                    "value"
                ],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 1029,
                        "maximum": 1029
                    },
                    "value": {
                        "type": "string"
                    }
                }
            },
            "var": {
                "description": "Variable Literal Type",
                "type": "object",
                "additionalProperties": false,
                "required": [
                    "kind",
                    "value"
                ],
                "properties": {
                    "kind": {
                        "type": "integer",
                        "minimum": 1030,
                        "maximum": 1030
                    },
                    "value": {
                        "type": "string",
                        "minLength": 1
                    }
                }
            }
        }
    }
}
